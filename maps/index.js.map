{"version":3,"sources":["index.js"],"names":["menuBtn","document","querySelector","navMenu","saleMain","URLmain","addEventListener","e","preventDefault","classList","toggle","cardsRender","data","listWrapper","createElement","add","console","log","forEach","item","index","li","concat","oldPrice","price","discount","Math","round","dataset","text","insertAdjacentHTML","image","title","appendChild","init","fetch","then","response","json","cards","append","err"],"mappings":"AAAA,aAAA,IAAMA,QAAUC,SAASC,cAAc,iBACjCC,QAAUF,SAASC,cAAc,gBACjCE,SAAWH,SAASC,cAAc,eAClCG,QAAU,kCAIhBL,QAAQM,iBAAiB,SAAS,SAACC,GAC/BA,EAAEC,iBACFR,QAAQS,UAAUC,OAAO,wBACzBP,QAAQM,UAAUC,OAAO,sBAC7B,IAIA,IAAMC,YAAc,SAACC,GACjB,GAAGA,EAAM,CACN,IAAMC,EAAeZ,SAASa,cAAc,MA4B3C,OA3BDD,EAAYJ,UAAUM,IAAI,aAAc,mBACvCC,QAAQC,IAAIL,GAEZA,EAAKM,SAAQ,SAACC,EAAMC,GAClB,IAAMC,EAAMpB,SAASa,cAAc,MACnCO,EAAGZ,UAAUM,IAAI,aAAY,cAAAO,OAAgBF,EAAM,IAEjD,IAAIG,EAAWX,EAAKQ,GAAOI,MACvBC,EAAW,EACXb,EAAKQ,GAAOK,WACZA,EAAWb,EAAKQ,GAAOK,SACvBF,EAAWG,KAAKC,MAAMJ,EAAYA,EAAS,IAAIE,GAC/CJ,EAAGZ,UAAUM,IAAI,uBACjBM,EAAGO,QAAQC,KAAI,GAAAP,OAAMV,EAAKQ,GAAOK,SAAQ,MAG7CJ,EAAGS,mBAAmB,aAAY,oEAAAR,OACmBH,EAAKY,MAAK,0KAAAT,OAE5BV,EAAKQ,GAAOI,MAAK,4DAAAF,OACjBC,EAAQ,oFAAAD,OAERV,EAAKQ,GAAOY,MAAK,SAEpDnB,EAAYoB,YAAYZ,EAE5B,IACOR,CACX,CACJ,EAEQqB,KAAO,WACPC,MAAM9B,SACL+B,MAAK,SAACC,GAAQ,OAAKA,EAASC,MAAM,IAClCF,MAAK,SAACxB,GAAI,OAAKD,YAAYC,EAAK,IAChCwB,MAAK,SAACG,GAAK,OAAKnC,SAASF,cAAc,cAAcsC,OAAOD,EAAM,IAAC,OAC7D,SAACE,GACJzB,QAAQC,IAAIwB,EAChB,GACN,EACDP","file":"../js/index.js","sourcesContent":["const menuBtn = document.querySelector('.header__menu');\r\nconst navMenu = document.querySelector('.navbar-menu');\r\nconst saleMain = document.querySelector('.sale__main');\r\nconst URLmain = 'http://localhost:3000/api/goods';\r\n\r\n\r\n// Открытие меню по клику\r\nmenuBtn.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    menuBtn.classList.toggle('header__menu--active');\r\n    navMenu.classList.toggle('navbar-menu--active')\r\n})\r\n\r\n\r\n// Функция рендера карточек\r\nconst cardsRender = (data) => {\r\n    if(data) {\r\n       const listWrapper  = document.createElement('ul');\r\n       listWrapper.classList.add('sale__list', 'sale__list-main');\r\n        console.log(data)\r\n        \r\n        data.forEach((item, index) => {  \r\n          const li  = document.createElement('li');\r\n          li.classList.add('sale__item', `sale__item_${index+1}`);\r\n\r\n            let oldPrice = data[index].price;\r\n            let discount = 0;\r\n            if (data[index].discount) {\r\n                discount = data[index].discount;\r\n                oldPrice = Math.round(oldPrice + (oldPrice/100*discount));\r\n                li.classList.add('sale__item-discount');\r\n                li.dataset.text = `${data[index].discount}%`;\r\n              }   \r\n\r\n            li.insertAdjacentHTML('afterbegin',`\r\n                <img loading=\"lazy\" src= http://localhost:3000/${item.image} alt=\"Картинка скидок\" class=\"stock__img\" width=\"325\" height=\"295\">\r\n                <div class=\"sale__wrapper-prices\">\r\n                    <span class=\"price-sale\">${data[index].price} ₽</span>\r\n                    <span class=\"price-full\">${oldPrice} ₽</span>\r\n                </div>\r\n                <p class=\"sale__description\">${data[index].title}</p>`\r\n            );\r\n            listWrapper.appendChild(li);\r\n           \r\n        });\r\n        return listWrapper\r\n    }\r\n}\r\n// Загрузка данных карточек при загрузке\r\n  const init = () => {\r\n        fetch(URLmain)\r\n        .then((response) => response.json())\r\n        .then((data) => cardsRender(data))\r\n        .then((cards) => saleMain.querySelector('.container').append(cards))\r\n        .catch((err) => {\r\n            console.log(err)\r\n        })\r\n  }\r\n init()\r\n\r\n"]}