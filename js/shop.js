"use strict";var recommendationsSection=document.querySelector(".recommendations"),URLmain="http://localhost:3000/api/goods",basketWrapper=document.querySelector(".basket__products"),deliveryInfo=document.querySelector(".delivery-info__img"),basketResultPriceNew=document.querySelector(".basket__result-price-new"),basketResultCount=document.querySelector(".basket__result-count"),basketResultPrice=document.querySelector(".basket__result-price"),basketResultDiscount=document.querySelector(".basket__result-discount"),btnBasketDel=document.querySelector(".btn-basket-del"),basketCheckboxAll=document.querySelector(".basket__checkbox-all"),cardsRenderRecom=function(e){if(e){var t=document.createElement("ul");return t.classList.add("sale__list"),e.forEach((function(n,c){var s=document.createElement("li");s.classList.add("sale__item","sale__item_".concat(c+1));var a=e[c].price,r=0;e[c].discount&&(r=e[c].discount,a=Math.round(a+a/100*r),s.classList.add("sale__item-discount"),s.dataset.text="".concat(e[c].discount,"%")),s.insertAdjacentHTML("afterbegin",'\n                <img loading="lazy" src= http://localhost:3000/'.concat(n.image,' alt="Картинка скидок" class="stock__img" width="325" height="295">\n                <div class="sale__wrapper-prices">\n                    <span class="price-sale">').concat(e[c].price,' ₽</span>\n                    <span class="price-full">').concat(a,' ₽</span>\n                </div>\n                <p class="sale__description">').concat(e[c].title,"</p>")),t.appendChild(s)})),t}},initRecommendation=function(){fetch(URLmain).then((function(e){return e.json()})).then((function(e){return e.slice(0,8)})).then((function(e){return cardsRenderRecom(e)})).then((function(e){return recommendationsSection.append(e)})).catch((function(e){console.log(e)}))};initRecommendation();var ChangingQuantityGoods=function(){},initBasket=function e(t,n){var c=JSON.parse(localStorage.getItem("basket"))||null;if(c&&null!==c){t&&n&&(c.map((function(e){e.titleProduct==t&&("Plus"==n&&e.countProduct++,"Minus"==n&&e.countProduct--)})),localStorage.setItem("basket",JSON.stringify(c)),basketWrapper.querySelector(".basket__products-items").remove(),deliveryInfo.innerHTML="");var s=0,a=0,r=0,o=document.createElement("div");o.classList.add("basket__products-items"),c.forEach((function(e,t){s+=e.countProduct,a+=e.countProduct*e.newpriceProduct,r+=e.countProduct*e.oldriceProduct;var n=document.createElement("div");n.classList.add("basket__products-item"),n.insertAdjacentHTML("afterbegin",'\n                    <input type="checkbox" name="basket" value="select item">\n                    <img src= http://localhost:3000/'.concat(e.imageProduct,' alt="Картинака товара ').concat(t,'">\n                    <div class="products-items__info">\n                        <h3 class="product-title">').concat(e.titleProduct,'</h3>\n                        <p>Цвет: черный</p>\n                        <p>Оперативная память: 16 ГБ</p>\n                    </div>\n                    <div class="products-item__count">\n                        <button class="btn-subtract"></button>\n                        <span class="quantity-goods">').concat(e.countProduct,'</span>\n                        <button class="btn-increase"></button>\n                    </div>\n                    <div class="products-item__price">\n                        <span class="basket__new-price">').concat(e.newpriceProduct,' ₽</span>\n                        <span class="basket__old-price">').concat(e.oldriceProduct,' ₽</span>\n                        <a href="#" class="basket__credit">В кредит от <span>5600 ₽</span></a>\n                    </div>')),o.appendChild(n);var c=document.createElement("img");c.src="http://localhost:3000/".concat(e.imageProduct),deliveryInfo.appendChild(c)})),basketWrapper.appendChild(o),basketWrapper.querySelectorAll(".products-item__count").forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault();var n=t.target.closest(".basket__products-item").querySelector(".product-title").innerText;if(t.target.classList.contains("btn-subtract")||t.target.closest("btn-subtract")){if(t.target.closest(".basket__products-item").querySelector(".quantity-goods").innerText<2)return;e(n,"Minus")}(t.target.classList.contains("btn-increase")||t.target.closest("btn-increase"))&&e(n,"Plus")}))})),basketResultCount.innerText="Товары, ".concat(s,"  шт."),basketResultPriceNew.innerText="".concat(a," ₽"),basketResultPrice.innerText="".concat(r," ₽"),basketResultDiscount.innerText=r-a}else{var i=document.createElement("p");i.style.color="black",i.style.fontSize="50px",i.innerText="Корзина пуста",basketWrapper.append(i),basketResultCount.innerText="Товары, 0  шт.",basketResultPrice.innerText="0 ₽",basketResultPriceNew.innerText="0 ₽",basketResultDiscount.innerText="0 ₽"}};initBasket(null,null),btnBasketDel.addEventListener("click",(function(e){e.preventDefault(),basketWrapper.querySelector(".basket__products-items")&&basketCheckboxAll.checked&&(localStorage.removeItem("basket"),basketWrapper.querySelector(".basket__products-items").remove(),basketCheckboxAll.checked=!1,deliveryInfo.innerHTML="",initBasket(null,null))}));
//# sourceMappingURL=../maps/shop.js.map
